name: Transfer All Files

on:
  workflow_dispatch:
  
jobs:

  clone_repo:
      runs-on: [self-hosted, fts3-client-production ]
      steps:
        - uses: actions/checkout@v3

      
  transfer-all-files:
    needs: clone_repo
    runs-on: [self-hosted, fts3-client-production ]
    environment: APPROVAL_REQUIRED
    
    strategy:
      fail-fast: false
      matrix:
        FILENAME:
          - databases/blast.json
          - databases/gtdb-tk.json
          - databases/card.json
          - databases/checkm.json
          - databases/plsdb.json


          # Add more files as needed
    steps:
      - name: Dispatch Transfer file workflow for each file
        uses: ./.github/workflows/transfer_file.yml
        with:
          FILENAME: ${{ matrix.FILENAME }}
